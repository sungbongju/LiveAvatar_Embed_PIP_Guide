
# HeyGen Interactive Avatar êµ¬ì¶• ê°€ì´ë“œ

> ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ê²½ì˜í•™ì „ê³µ AI ìƒë‹´ ì•„ë°”íƒ€ êµ¬ì¶• í”„ë¡œì íŠ¸
> ì‘ì„±ì¼: 2025ë…„ 12ì›”

---

## ğŸ“‹ ëª©ì°¨

1. [[#1. ê°œìš”]]
2. [[#2. ì•„í‚¤í…ì²˜]]
3. [[#3. í™˜ê²½ ì„¤ì •]]
4. [[#4. í”„ë¡œì íŠ¸ êµ¬ì¡°]]
5. [[#5. UI ì»¤ìŠ¤í„°ë§ˆì´ì§•]]
6. [[#6. OpenAI GPT ì—°ë™]]
7. [[#7. GitHub Pages ì„ë² ë”©]]
8. [[#8. ì‹¤ì‹œê°„ ì§€ì‹ê´€ë¦¬]]

---

## 1. ê°œìš”

### í”„ë¡œì íŠ¸ ëª©í‘œ
- AI ì•„ë°”íƒ€ë¥¼ í†µí•œ ê²½ì˜í•™ì „ê³µ ìƒë‹´ ì„œë¹„ìŠ¤ ì œê³µ
- ìŒì„±/í…ìŠ¤íŠ¸ ê¸°ë°˜ ì‹¤ì‹œê°„ ëŒ€í™”
- OpenAI GPTì™€ ì—°ë™í•˜ì—¬ ì „ê³µ ì§€ì‹ ê¸°ë°˜ ì‘ë‹µ

### ê¸°ìˆ  ìŠ¤íƒ
| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| ì•„ë°”íƒ€ | HeyGen Interactive Avatar SDK |
| í”„ë¡ íŠ¸ì—”ë“œ | Next.js 15, React, TypeScript |
| AI | OpenAI GPT-4o-mini |
| ë°°í¬ | Netlify |
| í˜¸ìŠ¤íŒ… | GitHub Pages (ì„ë² ë”©) |

### ì£¼ìš” URL
- **Netlify ì•±**: https://dapper-moonbeam-54a024.netlify.app
- **GitHub Pages**: https://sdkparkforbi.github.io/d-id-agents/
- **GitHub ë ˆí¬**: https://github.com/sdkparkforbi/InteractiveAvatarNextJSDemo

---

## 2. ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Pages                              â”‚
â”‚                 (iframe ì„ë² ë”©)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Netlify                                   â”‚
â”‚              (Next.js ì•± í˜¸ìŠ¤íŒ…)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ /api/       â”‚  â”‚ /api/chat   â”‚  â”‚ Components  â”‚         â”‚
â”‚  â”‚ get-access- â”‚  â”‚ (OpenAI)    â”‚  â”‚ Interactive â”‚         â”‚
â”‚  â”‚ token       â”‚  â”‚             â”‚  â”‚ Avatar      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
          â–¼                â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HeyGen   â”‚    â”‚ OpenAI   â”‚    â”‚ ì‚¬ìš©ì   â”‚
    â”‚ API      â”‚    â”‚ API      â”‚    â”‚ ë¸Œë¼ìš°ì € â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë°ì´í„° íë¦„
```
ì‚¬ìš©ì í…ìŠ¤íŠ¸ ì…ë ¥
    â†“
OpenAI API (/api/chat)
    â†“
GPT-4o-mini + System Prompt (ì „ê³µ ì§€ì‹)
    â†“
ì‘ë‹µ ìƒì„±
    â†“
HeyGen Avatarê°€ ì‘ë‹µ ë§í•¨ (avatar.speak)
```

---

## 3. í™˜ê²½ ì„¤ì •

### 3.1 í•„ìš”í•œ ê³„ì •
- [HeyGen](https://app.heygen.com) - API Key ë°œê¸‰
- [OpenAI](https://platform.openai.com) - API Key ë°œê¸‰
- [GitHub](https://github.com) - ë ˆí¬ì§€í† ë¦¬
- [Netlify](https://netlify.com) - ë°°í¬

### 3.2 HeyGen API Key ë°œê¸‰
1. https://app.heygen.com ë¡œê·¸ì¸
2. Settings â†’ API ë©”ë‰´
3. API Key ë³µì‚¬

### 3.3 Netlify í™˜ê²½ë³€ìˆ˜ ì„¤ì •
| ë³€ìˆ˜ëª… | ì„¤ëª… |
|--------|------|
| `HEYGEN_API_KEY` | HeyGen API í‚¤ |
| `OPENAI_API_KEY` | OpenAI API í‚¤ |

**ì„¤ì • ê²½ë¡œ**: Netlify Dashboard â†’ Site settings â†’ Environment variables

### 3.4 GitHub-Netlify ì—°ë™
1. Netlify â†’ "Add new site" â†’ "Import an existing project"
2. GitHub ì—°ê²° â†’ ë ˆí¬ì§€í† ë¦¬ ì„ íƒ
3. Build settings:
   - Build command: `pnpm run build`
   - Publish directory: `.next`

---

## 4. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
InteractiveAvatarNextJSDemo/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ get-access-token/
â”‚   â”‚   â”‚   â””â”€â”€ route.ts          # HeyGen í† í° ë°œê¸‰
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”‚       â””â”€â”€ route.ts          # OpenAI ì—°ë™ â­
â”‚   â”œâ”€â”€ layout.tsx                # ë ˆì´ì•„ì›ƒ (NavBar ì œê±°ë¨)
â”‚   â””â”€â”€ page.tsx                  # ë©”ì¸ í˜ì´ì§€
â”œâ”€â”€ components/
â”‚   â””â”€â”€ InteractiveAvatar.tsx     # ì•„ë°”íƒ€ ì»´í¬ë„ŒíŠ¸ â­
â”œâ”€â”€ .env                          # í™˜ê²½ë³€ìˆ˜ (ë¡œì»¬)
â””â”€â”€ netlify.toml                  # Netlify ì„¤ì •
```

---

## 5. UI ì»¤ìŠ¤í„°ë§ˆì´ì§•

### 5.1 ì œê±°ëœ ìš”ì†Œ
- âŒ NavBar ("SDK NextJS Demo", "Avatars" ë©”ë‰´)
- âŒ ì„¤ì • í™”ë©´ (AvatarConfig)
- âŒ "Connection Quality" í‘œì‹œ
- âŒ ì˜ì–´ ë²„íŠ¼ë“¤

### 5.2 ìµœì¢… UI
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     [âœ•] â”‚  â† ì¢…ë£Œ ë²„íŠ¼
â”‚                         â”‚
â”‚     [ì•„ë°”íƒ€ ì˜ìƒ]        â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì§ˆë¬¸ ì…ë ¥ì°½...] [ì „ì†¡]  â”‚  â† ì±„íŒ… ì…ë ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ì£¼ìš” íŒŒì¼ ìˆ˜ì •

#### `app/layout.tsx`
```typescript
export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="ko">
      <body className="h-screen w-screen overflow-hidden">
        {children}  {/* NavBar ì œê±°ë¨ */}
      </body>
    </html>
  );
}
```

#### `app/page.tsx`
```typescript
"use client";
import InteractiveAvatar from "@/components/InteractiveAvatar";

export default function App() {
  return (
    <main className="w-screen h-screen">
      <InteractiveAvatar />
    </main>
  );
}
```

---

## 6. OpenAI GPT ì—°ë™

### 6.1 API Route ìƒì„±

**íŒŒì¼**: `app/api/chat/route.ts`

```typescript
import { NextRequest } from "next/server";
import OpenAI from "openai";

const client = new OpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

const SYSTEM_PROMPT = `ë‹¹ì‹ ì€ ì°¨ì˜ê³¼í•™ëŒ€í•™êµ ê²½ì˜í•™ì „ê³µì˜ AI ìƒë‹´ì‚¬ì…ë‹ˆë‹¤.
í•™ìƒë“¤ì˜ ì „ê³µ ê´€ë ¨ ì§ˆë¬¸ì— ì¹œì ˆí•˜ê³  ì •í™•í•˜ê²Œ ë‹µë³€í•´ì£¼ì„¸ìš”.
ë‹µë³€ì€ ê°„ê²°í•˜ê²Œ 2-3ë¬¸ì¥ìœ¼ë¡œ í•´ì£¼ì„¸ìš”.

## ê²½ì˜í•™ì „ê³µ ì§€ì‹
[ì—¬ê¸°ì— ì§€ì‹ ë‚´ìš© ì¶”ê°€]
`;

export async function POST(request: NextRequest) {
  const { message, history } = await request.json();

  const messages = [
    { role: "system", content: SYSTEM_PROMPT },
    ...history,
    { role: "user", content: message },
  ];

  const response = await client.chat.completions.create({
    model: "gpt-4o-mini",
    messages,
    max_tokens: 300,
  });

  const reply = response.choices[0]?.message?.content;

  return new Response(JSON.stringify({ reply }), {
    headers: { "Content-Type": "application/json" },
  });
}
```

### 6.2 ì•„ë°”íƒ€ ì»´í¬ë„ŒíŠ¸ì—ì„œ í˜¸ì¶œ

```typescript
// OpenAI API í˜¸ì¶œ
const response = await fetch("/api/chat", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ message: textToSend, history: chatHistory }),
});

const data = await response.json();

// ì•„ë°”íƒ€ê°€ ì‘ë‹µ ë§í•˜ê¸°
await avatarRef.current.speak({
  text: data.reply,
  taskType: TaskType.TALK,
});
```

---

## 7. GitHub Pages ì„ë² ë”©

### 7.1 iframe ì½”ë“œ
```html
<iframe 
  id="heygen-pip" 
  src="https://dapper-moonbeam-54a024.netlify.app" 
  allow="camera; microphone; autoplay; clipboard-write">
</iframe>
```

### 7.2 CSS ìŠ¤íƒ€ì¼ (ì•„ë°”íƒ€ í¬ê¸° ë§ì¶¤)
```css
#heygen-pip {
    width: 380px;
    height: 214px;  /* 16:9 ë¹„ìœ¨ */
    border: none;
    border-radius: 16px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    background: transparent;
}

@media (max-width: 768px) {
    #heygen-pip {
        width: 300px;
        height: 169px;
    }
}
```

---

## 8. ì‹¤ì‹œê°„ ì§€ì‹ê´€ë¦¬

> ë³„ë„ ë¬¸ì„œ: [[HeyGen ì‹¤ì‹œê°„ ì§€ì‹ê´€ë¦¬ ê°€ì´ë“œ]]

---

## ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¹Œë“œ ì—ëŸ¬: `avatar` does not exist
```typescript
// âŒ ì˜ëª»ë¨
const { avatar } = useStreamingAvatarSession();

// âœ… ì˜¬ë°”ë¦„
const { avatarRef } = useStreamingAvatarSession();
avatarRef.current.speak(...)
```

### ë¹Œë“œ ì—ëŸ¬: TaskType
```typescript
// âŒ ì˜ëª»ë¨
taskType: "talk"

// âœ… ì˜¬ë°”ë¦„
import { TaskType } from "@heygen/streaming-avatar";
taskType: TaskType.TALK
```

### Netlify ë°°í¬ ì•ˆ ë¨
- **ìºì‹œ ë¬¸ì œ**: "Deploy project without cache" ì‹¤í–‰
- **í™˜ê²½ë³€ìˆ˜ ëˆ„ë½**: HEYGEN_API_KEY, OPENAI_API_KEY í™•ì¸

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [HeyGen API Docs](https://docs.heygen.com)
- [HeyGen Labs](https://labs.heygen.com/interactive-avatar)
- [OpenAI API Docs](https://platform.openai.com/docs)
- [Next.js Docs](https://nextjs.org/docs)

---

#HeyGen #AIì•„ë°”íƒ€ #OpenAI #NextJS #Netlify
